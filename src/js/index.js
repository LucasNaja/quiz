"use strict";const btnNext=document.querySelector("#next"),btnStart=document.querySelector("#start"),btnRank=document.querySelector("#rank"),btnGiveUp=document.querySelector("#giveUp"),btnShowAnswers=document.querySelector("#showAnswers"),btnFinish=document.querySelector("#finish"),btnSave=document.querySelector("#save"),selectQuiz=document.querySelector("#selectQuiz"),quiz=document.querySelector("#quiz"),pagination=document.querySelector("#pagination"),winPoints=document.querySelector("#points"),star=document.querySelector("#star"),showAnswers=document.querySelector("#answers"),quisSave=document.querySelector("#quizSave"),hitsSave=document.querySelector("#hitsSave"),timeSave=document.querySelector("#timeSave"),textName=document.querySelector("#name"),modal5=document.querySelector("#modal5"),switcherTheme=document.querySelector("#darktheme"),quizTitle=document.querySelector("#quizTitle"),root=document.querySelector(":root"),metaThemeColor=document.querySelector("meta[name=theme-color]"),metaMSThemeColor=document.querySelector("meta[name=msapplication-navbutton-color]"),icon=document.querySelector("link[rel=icon]"),options=document.querySelector("#options"),tabs=document.querySelector("#tabs"),tabItems=document.querySelector("#tabItems");let timeInterval,types,points=0,currentQuestion=0,matches=[],selectedType=-1,time=0,radioButtons="";for(let a=0;a<names.length;a++)radioButtons+=`<p>
			<label>
				<input class="with-gap" name="selectQuiz" type="radio" data-num="${a}" data-text="${names[a]}" ${0==a?"checked":""} />
				<span>${names[a]}</span>
			</label>
		</p>
		<div style="margin:-10px 0 -1px 0;background-color:#9e9e9e" class="divider"></div>`;options.innerHTML=radioButtons,types=document.querySelectorAll("[name=selectQuiz]");const darkTheme=()=>{localStorage.removeItem("lighttheme"),metaThemeColor.setAttribute("content","#2962ff"),metaMSThemeColor.setAttribute("content","#2962ff"),icon.setAttribute("href","images/logo_dark.png"),document.body.setAttribute("data-theme","dark")},lightTheme=()=>{localStorage.setItem("lighttheme",1),metaThemeColor.setAttribute("content","#009688"),metaMSThemeColor.setAttribute("content","#009688"),icon.setAttribute("href","images/logo_light.png"),document.body.setAttribute("data-theme","light")};if(localStorage.getItem("lighttheme")&&(lightTheme(),switcherTheme.checked=!1),localStorage.getItem("registeredItems")){const a=JSON.parse(localStorage.getItem("registeredItems")).items;0===a.length&&localStorage.removeItem("registeredItems")}const render=()=>{let a=`<p id="time" style="margin:2px 0 0 0;font-size:17px">${timeProgress(time)}<i class="material-icons right" style="margin-left:5px;font-size:25px">access_time</i></p><h5>${currentQuestion+1}) ${questions[selectedType][currentQuestion]}</h5>`;const b=[answers[selectedType][currentQuestion],...fakeAnswers[selectedType][currentQuestion]],c=[];for(let d,e=0;e<b.length;e++){for(d=parseInt(Math.random()*b.length);-1!==c.indexOf(d);)d=parseInt(Math.random()*b.length);c[e]=d;a+=`<p>
				<label>
					<input class="with-gap" name="question${currentQuestion}" data-text="${b[d]}" type="radio" />
					<span style="font-size:16px">${["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","X","W","Y","Z"][e]}) ${b[d]}</span>
				</label>
			</p>
			<div style="margin:-10px 0 -1px 0;background-color:#9e9e9e" class="divider"></div>`}createPagination(),currentQuestion==answers[selectedType].length-1?(btnNext.setAttribute("title","Finalizar"),btnNext.innerHTML="Finalizar<i class=\"material-icons right\">chevron_right</i>"):(btnNext.setAttribute("title","Pr\xF3xima Pergunta"),btnNext.innerHTML="Pr\xF3ximo<i class=\"material-icons right\">chevron_right</i>"),quiz.innerHTML=a},createPagination=()=>{let a="<li class=\"disabled\"><a><i class=\"material-icons\">chevron_left</i></a></li>";for(let b=0;b<questions[selectedType].length;b++)a+=`<li class="${matches[b]===void 0?"":"waves-effect waves-light"} ${currentQuestion==b?"active bgcolor3 c-df no-border waves-effect waves-light":`${matches[b]===void 0?"disabled":1===matches[b]?`active green c-df no-border ${b==questions[selectedType].length-1?"":"brw"}`:`active red c-df no-border ${b==questions[selectedType].length-1?"":"brw"}`}`}"><a>${b+1}</a></li>`;a+="<li class=\"disabled\"><a><i class=\"material-icons\">chevron_right</i></a></li>",pagination.innerHTML=a,pagination.scrollLeft=pagination.querySelectorAll("li")[currentQuestion<parseInt(questions[selectedType].length/2+1)?0:parseInt(questions[selectedType].length/2)+1].offsetLeft},timeProgress=a=>{const b=parseInt(a/3600);a-=3600*b;const c=parseInt(a/60);return a-=60*c,1<=b?(M.Modal.getInstance(document.querySelector("#modal6")).open(),void stop()):`${c}m ${a}s`},reTimeProgress=a=>{const b=a.split(" ");return 60*parseInt(b[0].replace("m",""))+parseInt(b[1].replace("s",""))},start=()=>{selectQuiz.classList.add("hide"),btnStart.classList.add("hide"),btnRank.classList.add("hide"),quiz.classList.remove("hide"),btnNext.classList.remove("hide"),btnGiveUp.classList.remove("hide"),pagination.classList.remove("hide"),btnSave.removeAttribute("disabled");for(let a=0;a<types.length;a++)types[a].checked&&(selectedType=a,document.title=`Quiz - ${types[a].getAttribute("data-text")}`);render(),timeInterval=setInterval(()=>{document.querySelector("#time").innerHTML=`${timeProgress(++time)}<i class="material-icons right" style="margin-left:5px;font-size:25px">access_time</i>`},1e3)},stop=()=>{selectQuiz.classList.remove("hide"),btnStart.classList.remove("hide"),btnRank.classList.remove("hide"),quiz.classList.add("hide"),btnNext.classList.add("hide"),btnGiveUp.classList.add("hide"),btnShowAnswers.classList.add("hide"),btnFinish.classList.add("hide"),pagination.classList.add("hide"),btnSave.classList.add("hide"),document.title="Quizzes Online - In\xEDcio",points=0,currentQuestion=0,selectedType=-1,matches=[],clearInterval(timeInterval),time=0},next=()=>{const a=document.querySelectorAll(`[name=question${currentQuestion}]`);let b=0;for(let c=0;c<a.length;c++)a[c].checked||b++;if(b===a.length)M.toast({html:"Voc\xEA deve selecionar uma alternativa!",classes:"red accent-4",displayLength:2050});else{for(let b=0;b<a.length;b++)a[b].checked&&a[b].getAttribute("data-text")===answers[selectedType][currentQuestion]&&(matches.push(1),points+=1);if(void 0===matches[currentQuestion]&&matches.push(0),currentQuestion+=1,currentQuestion===answers[selectedType].length){clearInterval(timeInterval);for(let b=0;b<a.length;b++)a[b].disabled=!0;btnNext.classList.add("hide"),btnGiveUp.classList.add("hide"),btnShowAnswers.classList.remove("hide"),btnSave.classList.remove("hide"),btnFinish.classList.remove("hide"),btnShowAnswers.onclick=()=>{let a="<h4><i class=\"material-icons\" style=\"top:2px\">question_answer</i> Respostas corretas</h4>";for(let b=0;b<answers[selectedType].length;b++)a+=`<p style="margin:0">${b+1}) ${questions[selectedType][b]}</p>
					<p style="margin:0 0 10px 0">R: ${answers[selectedType][b]} <i class="material-icons ${0===matches[b]?"red-text":"green-text"}" style="top:${0===matches[b]?"7":"5"}px;margin:-7px 0 0 0">${0===matches[b]?"clear":"done"}</i></p>`;showAnswers.innerHTML=a},quisSave.innerHTML=types[selectedType].getAttribute("data-text"),timeSave.innerHTML=timeProgress(time);const b=100*(points/answers[selectedType].length);hitsSave.innerHTML=`${points} de ${questions[selectedType].length} (<span class="${50>b?"red-text":"green-text"}">${b.toFixed(1)}%</span>)`,winPoints.innerHTML=`${points} de ${questions[selectedType].length} e obteve um desempenho de <span class="${50>b?"red-text":"green-text"}">${b.toFixed(1)}%</span>`,star.className=`material-icons ${50>b?"red-text":"green-text"}`,M.Modal.getInstance(document.querySelector("#modal2")).open(),createPagination()}else render()}},arraySort=a=>{const b=[];for(let c=-1,d=-1,e=3600;0<a.length;){for(let b=0;b<a.length;b++)a[b][2]>c?(d=b,e=reTimeProgress(a[b][4]),c=a[b][2]):a[b][2]===c&&reTimeProgress(a[b][4])<e&&(d=b,e=reTimeProgress(a[b][4]));c=-1,e=3600,b.push(a[d]),a.splice(d,1)}return b},save=()=>{if(""!==textName.value.trim()&&2<textName.value.length){const a=localStorage.getItem("registeredItems");if(null===a)localStorage.setItem("registeredItems",`{"items":[["${types[selectedType].getAttribute("data-text")}","${textName.value}",${points},${questions[selectedType].length},"${timeProgress(time)}"]]}`);else{let b=JSON.parse(a).items;b.push([types[selectedType].getAttribute("data-text"),textName.value,points,questions[selectedType].length,timeProgress(time)]),b=arraySort(b),localStorage.setItem("registeredItems",`{"items":${JSON.stringify(b)}}`)}M.Modal.getInstance(modal5).close(),btnSave.setAttribute("disabled","true"),textName.value="",textName.select()}else M.toast({html:"Por favor, escolha um nome v\xE1lido!",classes:"red accent-4",displayLength:2050}),textName.select()},renderSavedItems=(a=0)=>{void 0!==M.Tabs.getInstance(tabs)&&M.Tabs.getInstance(tabs).destroy();let b,c,d="<p style=\"margin-left:10px\">N\xE3o h\xE1 nenhum jogo salvo! :(</p>",e="";const f=localStorage.getItem("registeredItems");if(b="<table class=\"responsive-table\"><thead><tr><th>Posi\xE7\xE3o</th><th class=\"center-align\">Nome</th><th class=\"center-align\">Acertos</th><th class=\"center-align\">Tempo</th><th class=\"center-align\">Remover</th></tr></thead><tbody>",null!==f){d="";let g=!1;for(let h=0;h<types.length;h++){c=JSON.parse(f).items;for(let a=0,d=0,e=1;a<c.length;a++,d++)types[h].getAttribute("data-text")===c[a][0]&&(b+=`<tr>
							<td>${e}Â°</td>
							<td class="center-align">${c[a][1]}</td>
							<td class="center-align">${c[a][2]}/${c[a][3]}</td>
							<td class="center-align">${c[a][4]}</td>
							<td class="center-align"><i class="material-icons red-text" style="cursor:pointer" onclick="deleteItem(${d}, ${parseInt(types[h].getAttribute("data-num"),10)})">close</i></td>
						</tr>`,c.splice(a,1),e+=1,a-=1,g=!0);g&&(d+=`<li class="tab tabs-fixed-width tab-demo"><a data-num="${types[h].getAttribute("data-num")}" class="${a==h?"active":""}" href="#quiz${h}">${types[h].getAttribute("data-text")}</a></li>`,b+="</tbody></table>",e+=`<div id="quiz${h}">${b}</div>`,g=!1,b="<table class=\"responsive-table\"><thead><tr><th>Posi\xE7\xE3o</th><th class=\"center-align\">Nome</th><th class=\"center-align\">Acertos</th><th class=\"center-align\">Tempo</th><th class=\"center-align\">Remover</th></tr></thead><tbody>")}tabs.innerHTML=d,tabItems.innerHTML=e,M.Tabs.init(document.querySelectorAll(".tabs"))}else tabs.innerHTML=d,tabItems.innerHTML=e},deleteItem=(a,b)=>{const c=JSON.parse(localStorage.getItem("registeredItems")).items;c.splice(a,1),0===c.length?localStorage.removeItem("registeredItems"):localStorage.setItem("registeredItems",`{"items":${JSON.stringify(c)}}`),renderSavedItems(b)},clearSavedItems=()=>{localStorage.removeItem("registeredItems"),renderSavedItems()};window.addEventListener("DOMContentLoaded",()=>{M.Sidenav.init(document.querySelectorAll(".sidenav")),M.Modal.init(document.querySelectorAll(".modal")),M.FloatingActionButton.init(document.querySelectorAll(".fixed-action-btn"),{hoverEnabled:!1}),localStorage.getItem("firstVisit")||(localStorage.setItem("firstVisit",0),M.TapTarget.init(document.querySelectorAll(".tap-target"),{onClose:()=>{M.FloatingActionButton.getInstance(document.querySelector(".fixed-action-btn")).open()}}),setTimeout(()=>{M.TapTarget.getInstance(document.querySelector(".tap-target")).open(),M.TapTarget.getInstance(document.querySelector(".tap-target"))._calculatePositioning()},100)),renderSavedItems(),btnRank.onclick=()=>{const a=M.Tabs.getInstance(tabs);if(a)for(let b=0;b<a.$tabLinks.length;b++){const c=a.$tabLinks[b].getAttribute("data-num");if(types[c].checked){a.$tabLinks[b].click(),setTimeout(()=>{a.updateTabIndicator(),tabs.scrollLeft=a.$tabLinks[b].offsetLeft},300);break}}},btnSave.onclick=()=>{setTimeout(()=>{textName.select()},50)}}),modal5.onkeydown=a=>{13===a.which&&(save(),renderSavedItems())},window.onload=()=>{const a=document.querySelector("#preloader");document.querySelector("#nav").classList.remove("hide"),document.querySelector("#container").classList.remove("hide"),a.classList.add("hide"),a.remove()}
